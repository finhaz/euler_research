clear;
clc;
% 设置参数
R = 0.1; % 线圈半径，单位m
I = 1; % 线圈电流，单位A
f = 1e6; % 线圈频率，单位Hz
omega = 2*pi*f; % 角频率，单位rad/s
mu0 = 4*pi*1e-7; % 真空磁导率，单位H/m
epsilon0 = 8.854e-12; % 真空电容率，单位F/m
x0 = 0.05; % 样品中心到线圈中心的距离，单位m
alpha = pi/4; % 样品的倾斜角度，单位rad
rho = 1e-6; % 样品的电阻率，单位ohm*m
mu = mu0; % 样品的磁导率，单位H/m
h = 0.01; % 样品的薄膜厚度，单位m

% 生成网格
L = 0.2; % 网格的边长，单位m
dx = 0.001; % 网格的分辨率，单位m
x = -L/2:dx:L/2; % x轴方向的网格点
y = -L/2:dx:L/2; % y轴方向的网格点
z = -L/2:dx:L/2; % z轴方向的网格点
[X,Y,Z] = meshgrid(x,y,z); % 生成三维网格

% 计算磁场
r = sqrt(X.^2+Y.^2+Z.^2); % 网格点到线圈中心的距离，单位m
theta = acos(Z./r); % 网格点的极角，单位rad
phi = atan2(Y,X); % 网格点的方位角，单位rad
A = mu0*I*R^2./(2*r.^3).*sin(theta); % 线圈产生的矢量势，单位Wb/m
V = 0; % 线圈产生的标量势，单位V
Bx = -1/rho*curl(A,1); % 线圈产生的x方向的磁场分量，单位T
By = -1/rho*curl(A,2); % 线圈产生的y方向的磁场分量，单位T
Bz = -1/rho*curl(A,3); % 线圈产生的z方向的磁场分量，单位T
